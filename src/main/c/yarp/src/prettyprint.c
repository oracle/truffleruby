/******************************************************************************/
/* This file is generated by the templates/template.rb script and should not  */
/* be modified manually. See                                                  */
/* templates/src/prettyprint.c.erb                                            */
/* if you are looking to modify the                                           */
/* template                                                                   */
/******************************************************************************/
#include "prism/defines.h"

#include <stdio.h>

#include "prism/ast.h"
#include "prism/parser.h"
#include "prism/util/pm_buffer.h"

static void
prettyprint_location(pm_buffer_t *buffer, pm_parser_t *parser, pm_location_t *location) {
    char printed[] = "[0000-0000]";
    snprintf(printed, sizeof(printed), "[%04ld-%04ld]", (long int)(location->start - parser->start), (long int)(location->end - parser->start));
    pm_buffer_append_str(buffer, printed, strlen(printed));
}

static void
prettyprint_node(pm_buffer_t *buffer, pm_parser_t *parser, pm_node_t *node) {
    switch (PM_NODE_TYPE(node)) {
        // We do not need to print a ScopeNode as it's not part
        // of the AST
        case PM_SCOPE_NODE:
            return;
        case PM_ALIAS_GLOBAL_VARIABLE_NODE: {
            pm_buffer_append_str(buffer, "AliasGlobalVariableNode(", 24);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_alias_global_variable_node_t *)node)->new_name);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_alias_global_variable_node_t *)node)->old_name);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_alias_global_variable_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ALIAS_METHOD_NODE: {
            pm_buffer_append_str(buffer, "AliasMethodNode(", 16);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_alias_method_node_t *)node)->new_name);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_alias_method_node_t *)node)->old_name);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_alias_method_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ALTERNATION_PATTERN_NODE: {
            pm_buffer_append_str(buffer, "AlternationPatternNode(", 23);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_alternation_pattern_node_t *)node)->left);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_alternation_pattern_node_t *)node)->right);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_alternation_pattern_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_AND_NODE: {
            pm_buffer_append_str(buffer, "AndNode(", 8);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_and_node_t *)node)->left);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_and_node_t *)node)->right);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_and_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ARGUMENTS_NODE: {
            pm_buffer_append_str(buffer, "ArgumentsNode(", 14);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_arguments_node_t *)node)->arguments.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_arguments_node_t *) node)->arguments.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ARRAY_NODE: {
            pm_buffer_append_str(buffer, "ArrayNode(", 10);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_array_node_t *)node)->elements.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_array_node_t *) node)->elements.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_array_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_array_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_array_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_array_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ARRAY_PATTERN_NODE: {
            pm_buffer_append_str(buffer, "ArrayPatternNode(", 17);
                        if (((pm_array_pattern_node_t *)node)->constant == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_array_pattern_node_t *)node)->constant);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_array_pattern_node_t *)node)->requireds.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_array_pattern_node_t *) node)->requireds.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_array_pattern_node_t *)node)->rest == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_array_pattern_node_t *)node)->rest);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_array_pattern_node_t *)node)->posts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_array_pattern_node_t *) node)->posts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_array_pattern_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_array_pattern_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_array_pattern_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_array_pattern_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ASSOC_NODE: {
            pm_buffer_append_str(buffer, "AssocNode(", 10);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_assoc_node_t *)node)->key);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_assoc_node_t *)node)->value == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_assoc_node_t *)node)->value);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_assoc_node_t *)node)->operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_assoc_node_t *)node)->operator_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ASSOC_SPLAT_NODE: {
            pm_buffer_append_str(buffer, "AssocSplatNode(", 15);
                        if (((pm_assoc_splat_node_t *)node)->value == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_assoc_splat_node_t *)node)->value);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_assoc_splat_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BACK_REFERENCE_READ_NODE: {
            pm_buffer_append_str(buffer, "BackReferenceReadNode(", 22);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BEGIN_NODE: {
            pm_buffer_append_str(buffer, "BeginNode(", 10);
                        if (((pm_begin_node_t *)node)->begin_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_begin_node_t *)node)->begin_keyword_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_begin_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_begin_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_begin_node_t *)node)->rescue_clause == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_begin_node_t *)node)->rescue_clause);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_begin_node_t *)node)->else_clause == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_begin_node_t *)node)->else_clause);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_begin_node_t *)node)->ensure_clause == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_begin_node_t *)node)->ensure_clause);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_begin_node_t *)node)->end_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_begin_node_t *)node)->end_keyword_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BLOCK_ARGUMENT_NODE: {
            pm_buffer_append_str(buffer, "BlockArgumentNode(", 18);
                        if (((pm_block_argument_node_t *)node)->expression == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_block_argument_node_t *)node)->expression);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_block_argument_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BLOCK_LOCAL_VARIABLE_NODE: {
            pm_buffer_append_str(buffer, "BlockLocalVariableNode(", 23);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_block_local_variable_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BLOCK_NODE: {
            pm_buffer_append_str(buffer, "BlockNode(", 10);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_block_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_block_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_block_node_t *)node)->parameters == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_block_node_t *)node)->parameters);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_block_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_block_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_block_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_block_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BLOCK_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "BlockParameterNode(", 19);
                        if (((pm_block_parameter_node_t *)node)->name == 0) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                char name_buffer[12];
                snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_block_parameter_node_t *)node)->name);
                pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_block_parameter_node_t *)node)->name_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_block_parameter_node_t *)node)->name_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_block_parameter_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BLOCK_PARAMETERS_NODE: {
            pm_buffer_append_str(buffer, "BlockParametersNode(", 20);
                        if (((pm_block_parameters_node_t *)node)->parameters == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_block_parameters_node_t *)node)->parameters);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_block_parameters_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_block_parameters_node_t *) node)->locals.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_block_parameters_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_block_parameters_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_block_parameters_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_block_parameters_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_BREAK_NODE: {
            pm_buffer_append_str(buffer, "BreakNode(", 10);
                        if (((pm_break_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_break_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_break_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CALL_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "CallAndWriteNode(", 17);
                        if (((pm_call_and_write_node_t *)node)->receiver == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_and_write_node_t *)node)->receiver);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_and_write_node_t *)node)->call_operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_and_write_node_t *)node)->call_operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_and_write_node_t *)node)->message_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_and_write_node_t *)node)->message_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_and_write_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_and_write_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_and_write_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_and_write_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_and_write_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_and_write_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char read_name_buffer[12];
            snprintf(read_name_buffer, sizeof(read_name_buffer), "%u", ((pm_call_and_write_node_t *)node)->read_name);
            pm_buffer_append_str(buffer, read_name_buffer, strlen(read_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char write_name_buffer[12];
            snprintf(write_name_buffer, sizeof(write_name_buffer), "%u", ((pm_call_and_write_node_t *)node)->write_name);
            pm_buffer_append_str(buffer, write_name_buffer, strlen(write_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_call_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CALL_NODE: {
            pm_buffer_append_str(buffer, "CallNode(", 9);
                        if (((pm_call_node_t *)node)->receiver == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_node_t *)node)->receiver);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->call_operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_node_t *)node)->call_operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->message_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_node_t *)node)->message_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_node_t *)node)->block == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_node_t *)node)->block);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_call_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CALL_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "CallOperatorWriteNode(", 22);
                        if (((pm_call_operator_write_node_t *)node)->receiver == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_operator_write_node_t *)node)->receiver);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_operator_write_node_t *)node)->call_operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_operator_write_node_t *)node)->call_operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_operator_write_node_t *)node)->message_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_operator_write_node_t *)node)->message_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_operator_write_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_operator_write_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_operator_write_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_operator_write_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_operator_write_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_operator_write_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char read_name_buffer[12];
            snprintf(read_name_buffer, sizeof(read_name_buffer), "%u", ((pm_call_operator_write_node_t *)node)->read_name);
            pm_buffer_append_str(buffer, read_name_buffer, strlen(read_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char write_name_buffer[12];
            snprintf(write_name_buffer, sizeof(write_name_buffer), "%u", ((pm_call_operator_write_node_t *)node)->write_name);
            pm_buffer_append_str(buffer, write_name_buffer, strlen(write_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_call_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_call_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CALL_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "CallOrWriteNode(", 16);
                        if (((pm_call_or_write_node_t *)node)->receiver == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_or_write_node_t *)node)->receiver);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_or_write_node_t *)node)->call_operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_or_write_node_t *)node)->call_operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_or_write_node_t *)node)->message_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_or_write_node_t *)node)->message_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_or_write_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_or_write_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_or_write_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_or_write_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_call_or_write_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_call_or_write_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char read_name_buffer[12];
            snprintf(read_name_buffer, sizeof(read_name_buffer), "%u", ((pm_call_or_write_node_t *)node)->read_name);
            pm_buffer_append_str(buffer, read_name_buffer, strlen(read_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char write_name_buffer[12];
            snprintf(write_name_buffer, sizeof(write_name_buffer), "%u", ((pm_call_or_write_node_t *)node)->write_name);
            pm_buffer_append_str(buffer, write_name_buffer, strlen(write_name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_call_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_call_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CAPTURE_PATTERN_NODE: {
            pm_buffer_append_str(buffer, "CapturePatternNode(", 19);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_capture_pattern_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_capture_pattern_node_t *)node)->target);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_capture_pattern_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CASE_NODE: {
            pm_buffer_append_str(buffer, "CaseNode(", 9);
                        if (((pm_case_node_t *)node)->predicate == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_case_node_t *)node)->predicate);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_case_node_t *)node)->conditions.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_case_node_t *) node)->conditions.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_case_node_t *)node)->consequent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_case_node_t *)node)->consequent);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_case_node_t *)node)->case_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_case_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_NODE: {
            pm_buffer_append_str(buffer, "ClassNode(", 10);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_class_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_class_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_node_t *)node)->class_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_node_t *)node)->constant_path);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_class_node_t *)node)->inheritance_operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_class_node_t *)node)->inheritance_operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_class_node_t *)node)->superclass == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_node_t *)node)->superclass);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_class_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableAndWriteNode(", 26);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_and_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_and_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_variable_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableOperatorWriteNode(", 31);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_operator_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_operator_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_variable_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_class_variable_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableOrWriteNode(", 25);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_or_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_or_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_variable_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_READ_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableReadNode(", 22);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_read_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_TARGET_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableTargetNode(", 24);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_target_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CLASS_VARIABLE_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ClassVariableWriteNode(", 23);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_class_variable_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_class_variable_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_class_variable_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_class_variable_write_node_t *)node)->operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_class_variable_write_node_t *)node)->operator_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantAndWriteNode(", 21);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_and_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_and_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantOperatorWriteNode(", 26);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_operator_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_operator_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_constant_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantOrWriteNode(", 20);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_or_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_or_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathAndWriteNode(", 25);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_and_write_node_t *)node)->target);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathNode(", 17);
                        if (((pm_constant_path_node_t *)node)->parent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_node_t *)node)->parent);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_node_t *)node)->child);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_node_t *)node)->delimiter_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathOperatorWriteNode(", 30);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_operator_write_node_t *)node)->target);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_constant_path_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathOrWriteNode(", 24);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_or_write_node_t *)node)->target);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_TARGET_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathTargetNode(", 23);
                        if (((pm_constant_path_target_node_t *)node)->parent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_target_node_t *)node)->parent);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_target_node_t *)node)->child);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_target_node_t *)node)->delimiter_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_PATH_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantPathWriteNode(", 22);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_write_node_t *)node)->target);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_path_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_path_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_READ_NODE: {
            pm_buffer_append_str(buffer, "ConstantReadNode(", 17);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_read_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_TARGET_NODE: {
            pm_buffer_append_str(buffer, "ConstantTargetNode(", 19);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_target_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_CONSTANT_WRITE_NODE: {
            pm_buffer_append_str(buffer, "ConstantWriteNode(", 18);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_constant_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_constant_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_constant_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_DEF_NODE: {
            pm_buffer_append_str(buffer, "DefNode(", 8);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_def_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->receiver == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_def_node_t *)node)->receiver);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->parameters == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_def_node_t *)node)->parameters);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_def_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_def_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_def_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->def_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->equal_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->equal_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_def_node_t *)node)->end_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_def_node_t *)node)->end_keyword_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_DEFINED_NODE: {
            pm_buffer_append_str(buffer, "DefinedNode(", 12);
                        if (((pm_defined_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_defined_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_defined_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_defined_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_defined_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_defined_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ELSE_NODE: {
            pm_buffer_append_str(buffer, "ElseNode(", 9);
                        prettyprint_location(buffer, parser, &((pm_else_node_t *)node)->else_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_else_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_else_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_else_node_t *)node)->end_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_else_node_t *)node)->end_keyword_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_EMBEDDED_STATEMENTS_NODE: {
            pm_buffer_append_str(buffer, "EmbeddedStatementsNode(", 23);
                        prettyprint_location(buffer, parser, &((pm_embedded_statements_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_embedded_statements_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_embedded_statements_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_embedded_statements_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_EMBEDDED_VARIABLE_NODE: {
            pm_buffer_append_str(buffer, "EmbeddedVariableNode(", 21);
                        prettyprint_location(buffer, parser, &((pm_embedded_variable_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_embedded_variable_node_t *)node)->variable);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_ENSURE_NODE: {
            pm_buffer_append_str(buffer, "EnsureNode(", 11);
                        prettyprint_location(buffer, parser, &((pm_ensure_node_t *)node)->ensure_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_ensure_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_ensure_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_ensure_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FALSE_NODE: {
            pm_buffer_append_str(buffer, "FalseNode(", 10);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FIND_PATTERN_NODE: {
            pm_buffer_append_str(buffer, "FindPatternNode(", 16);
                        if (((pm_find_pattern_node_t *)node)->constant == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_find_pattern_node_t *)node)->constant);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_find_pattern_node_t *)node)->left);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_find_pattern_node_t *)node)->requireds.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_find_pattern_node_t *) node)->requireds.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_find_pattern_node_t *)node)->right);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_find_pattern_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_find_pattern_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_find_pattern_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_find_pattern_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FLIP_FLOP_NODE: {
            pm_buffer_append_str(buffer, "FlipFlopNode(", 13);
                        if (((pm_flip_flop_node_t *)node)->left == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_flip_flop_node_t *)node)->left);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_flip_flop_node_t *)node)->right == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_flip_flop_node_t *)node)->right);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_flip_flop_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FLOAT_NODE: {
            pm_buffer_append_str(buffer, "FloatNode(", 10);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FOR_NODE: {
            pm_buffer_append_str(buffer, "ForNode(", 8);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_for_node_t *)node)->index);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_for_node_t *)node)->collection);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_for_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_for_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_for_node_t *)node)->for_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_for_node_t *)node)->in_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_for_node_t *)node)->do_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_for_node_t *)node)->do_keyword_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_for_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FORWARDING_ARGUMENTS_NODE: {
            pm_buffer_append_str(buffer, "ForwardingArgumentsNode(", 24);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FORWARDING_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "ForwardingParameterNode(", 24);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_FORWARDING_SUPER_NODE: {
            pm_buffer_append_str(buffer, "ForwardingSuperNode(", 20);
                        if (((pm_forwarding_super_node_t *)node)->block == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_forwarding_super_node_t *)node)->block);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableAndWriteNode(", 27);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_and_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_and_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_global_variable_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableOperatorWriteNode(", 32);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_operator_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_operator_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_global_variable_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_global_variable_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableOrWriteNode(", 26);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_or_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_or_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_global_variable_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_READ_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableReadNode(", 23);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_read_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_TARGET_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableTargetNode(", 25);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_target_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_GLOBAL_VARIABLE_WRITE_NODE: {
            pm_buffer_append_str(buffer, "GlobalVariableWriteNode(", 24);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_global_variable_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_global_variable_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_global_variable_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_HASH_NODE: {
            pm_buffer_append_str(buffer, "HashNode(", 9);
                        prettyprint_location(buffer, parser, &((pm_hash_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_hash_node_t *)node)->elements.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_hash_node_t *) node)->elements.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_hash_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_HASH_PATTERN_NODE: {
            pm_buffer_append_str(buffer, "HashPatternNode(", 16);
                        if (((pm_hash_pattern_node_t *)node)->constant == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_hash_pattern_node_t *)node)->constant);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_hash_pattern_node_t *)node)->assocs.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_hash_pattern_node_t *) node)->assocs.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_hash_pattern_node_t *)node)->kwrest == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_hash_pattern_node_t *)node)->kwrest);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_hash_pattern_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_hash_pattern_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_hash_pattern_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_hash_pattern_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_IF_NODE: {
            pm_buffer_append_str(buffer, "IfNode(", 7);
                        if (((pm_if_node_t *)node)->if_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_if_node_t *)node)->if_keyword_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_if_node_t *)node)->predicate);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_if_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_if_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_if_node_t *)node)->consequent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_if_node_t *)node)->consequent);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_if_node_t *)node)->end_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_if_node_t *)node)->end_keyword_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_IMAGINARY_NODE: {
            pm_buffer_append_str(buffer, "ImaginaryNode(", 14);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_imaginary_node_t *)node)->numeric);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_IMPLICIT_NODE: {
            pm_buffer_append_str(buffer, "ImplicitNode(", 13);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_implicit_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_IN_NODE: {
            pm_buffer_append_str(buffer, "InNode(", 7);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_in_node_t *)node)->pattern);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_in_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_in_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_in_node_t *)node)->in_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_in_node_t *)node)->then_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_in_node_t *)node)->then_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableAndWriteNode(", 29);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_and_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_and_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_instance_variable_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableOperatorWriteNode(", 34);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_operator_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_operator_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_instance_variable_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_instance_variable_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableOrWriteNode(", 28);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_or_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_or_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_instance_variable_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_READ_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableReadNode(", 25);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_read_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_TARGET_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableTargetNode(", 27);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_target_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INSTANCE_VARIABLE_WRITE_NODE: {
            pm_buffer_append_str(buffer, "InstanceVariableWriteNode(", 26);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_instance_variable_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_instance_variable_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_instance_variable_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTEGER_NODE: {
            pm_buffer_append_str(buffer, "IntegerNode(", 12);
                        char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTERPOLATED_MATCH_LAST_LINE_NODE: {
            pm_buffer_append_str(buffer, "InterpolatedMatchLastLineNode(", 30);
                        prettyprint_location(buffer, parser, &((pm_interpolated_match_last_line_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_interpolated_match_last_line_node_t *)node)->parts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_interpolated_match_last_line_node_t *) node)->parts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_interpolated_match_last_line_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTERPOLATED_REGULAR_EXPRESSION_NODE: {
            pm_buffer_append_str(buffer, "InterpolatedRegularExpressionNode(", 34);
                        prettyprint_location(buffer, parser, &((pm_interpolated_regular_expression_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_interpolated_regular_expression_node_t *)node)->parts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_interpolated_regular_expression_node_t *) node)->parts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_interpolated_regular_expression_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTERPOLATED_STRING_NODE: {
            pm_buffer_append_str(buffer, "InterpolatedStringNode(", 23);
                        if (((pm_interpolated_string_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_interpolated_string_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_interpolated_string_node_t *)node)->parts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_interpolated_string_node_t *) node)->parts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_interpolated_string_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_interpolated_string_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTERPOLATED_SYMBOL_NODE: {
            pm_buffer_append_str(buffer, "InterpolatedSymbolNode(", 23);
                        if (((pm_interpolated_symbol_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_interpolated_symbol_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_interpolated_symbol_node_t *)node)->parts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_interpolated_symbol_node_t *) node)->parts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_interpolated_symbol_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_interpolated_symbol_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_INTERPOLATED_X_STRING_NODE: {
            pm_buffer_append_str(buffer, "InterpolatedXStringNode(", 24);
                        prettyprint_location(buffer, parser, &((pm_interpolated_x_string_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_interpolated_x_string_node_t *)node)->parts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_interpolated_x_string_node_t *) node)->parts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_interpolated_x_string_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_KEYWORD_HASH_NODE: {
            pm_buffer_append_str(buffer, "KeywordHashNode(", 16);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_keyword_hash_node_t *)node)->elements.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_keyword_hash_node_t *) node)->elements.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_KEYWORD_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "KeywordParameterNode(", 21);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_keyword_parameter_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_keyword_parameter_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_keyword_parameter_node_t *)node)->value == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_keyword_parameter_node_t *)node)->value);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_KEYWORD_REST_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "KeywordRestParameterNode(", 25);
                        if (((pm_keyword_rest_parameter_node_t *)node)->name == 0) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                char name_buffer[12];
                snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_keyword_rest_parameter_node_t *)node)->name);
                pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_keyword_rest_parameter_node_t *)node)->name_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_keyword_rest_parameter_node_t *)node)->name_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_keyword_rest_parameter_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LAMBDA_NODE: {
            pm_buffer_append_str(buffer, "LambdaNode(", 11);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_lambda_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_lambda_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_lambda_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_lambda_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_lambda_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_lambda_node_t *)node)->parameters == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_lambda_node_t *)node)->parameters);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_lambda_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_lambda_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_AND_WRITE_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableAndWriteNode(", 26);
                        prettyprint_location(buffer, parser, &((pm_local_variable_and_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_local_variable_and_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_local_variable_and_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_and_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_and_write_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_OPERATOR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableOperatorWriteNode(", 31);
                        prettyprint_location(buffer, parser, &((pm_local_variable_operator_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_local_variable_operator_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_local_variable_operator_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_operator_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char operator_buffer[12];
            snprintf(operator_buffer, sizeof(operator_buffer), "%u", ((pm_local_variable_operator_write_node_t *)node)->operator);
            pm_buffer_append_str(buffer, operator_buffer, strlen(operator_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_operator_write_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_OR_WRITE_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableOrWriteNode(", 25);
                        prettyprint_location(buffer, parser, &((pm_local_variable_or_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_local_variable_or_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_local_variable_or_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_or_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_or_write_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_READ_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableReadNode(", 22);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_read_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_read_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_TARGET_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableTargetNode(", 24);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_target_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_target_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_LOCAL_VARIABLE_WRITE_NODE: {
            pm_buffer_append_str(buffer, "LocalVariableWriteNode(", 23);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_local_variable_write_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            char depth_buffer[12];
            snprintf(depth_buffer, sizeof(depth_buffer), "+%d", ((pm_local_variable_write_node_t *)node)->depth);
            pm_buffer_append_str(buffer, depth_buffer, strlen(depth_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_local_variable_write_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_local_variable_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_local_variable_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MATCH_LAST_LINE_NODE: {
            pm_buffer_append_str(buffer, "MatchLastLineNode(", 18);
                        prettyprint_location(buffer, parser, &((pm_match_last_line_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_match_last_line_node_t *)node)->content_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_match_last_line_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_match_last_line_node_t *)node)->unescaped), pm_string_length(&((pm_match_last_line_node_t *)node)->unescaped));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MATCH_PREDICATE_NODE: {
            pm_buffer_append_str(buffer, "MatchPredicateNode(", 19);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_match_predicate_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_match_predicate_node_t *)node)->pattern);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_match_predicate_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MATCH_REQUIRED_NODE: {
            pm_buffer_append_str(buffer, "MatchRequiredNode(", 18);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_match_required_node_t *)node)->value);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_match_required_node_t *)node)->pattern);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_match_required_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MATCH_WRITE_NODE: {
            pm_buffer_append_str(buffer, "MatchWriteNode(", 15);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_match_write_node_t *)node)->call);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_match_write_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_match_write_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MISSING_NODE: {
            pm_buffer_append_str(buffer, "MissingNode(", 12);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MODULE_NODE: {
            pm_buffer_append_str(buffer, "ModuleNode(", 11);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_module_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_module_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_module_node_t *)node)->module_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_module_node_t *)node)->constant_path);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_module_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_module_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_module_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_module_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MULTI_TARGET_NODE: {
            pm_buffer_append_str(buffer, "MultiTargetNode(", 16);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_multi_target_node_t *)node)->targets.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_multi_target_node_t *) node)->targets.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_multi_target_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_multi_target_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_multi_target_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_multi_target_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_MULTI_WRITE_NODE: {
            pm_buffer_append_str(buffer, "MultiWriteNode(", 15);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_multi_write_node_t *)node)->targets.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_multi_write_node_t *) node)->targets.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_multi_write_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_multi_write_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_multi_write_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_multi_write_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_multi_write_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_multi_write_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_NEXT_NODE: {
            pm_buffer_append_str(buffer, "NextNode(", 9);
                        if (((pm_next_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_next_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_next_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_NIL_NODE: {
            pm_buffer_append_str(buffer, "NilNode(", 8);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_NO_KEYWORDS_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "NoKeywordsParameterNode(", 24);
                        prettyprint_location(buffer, parser, &((pm_no_keywords_parameter_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_no_keywords_parameter_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_NUMBERED_REFERENCE_READ_NODE: {
            pm_buffer_append_str(buffer, "NumberedReferenceReadNode(", 26);
                        char number_buffer[12];
            snprintf(number_buffer, sizeof(number_buffer), "+%d", ((pm_numbered_reference_read_node_t *)node)->number);
            pm_buffer_append_str(buffer, number_buffer, strlen(number_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_OPTIONAL_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "OptionalParameterNode(", 22);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_optional_parameter_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_optional_parameter_node_t *)node)->name_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_optional_parameter_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_optional_parameter_node_t *)node)->value);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_OR_NODE: {
            pm_buffer_append_str(buffer, "OrNode(", 7);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_or_node_t *)node)->left);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_or_node_t *)node)->right);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_or_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PARAMETERS_NODE: {
            pm_buffer_append_str(buffer, "ParametersNode(", 15);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_parameters_node_t *)node)->requireds.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_parameters_node_t *) node)->requireds.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_parameters_node_t *)node)->optionals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_parameters_node_t *) node)->optionals.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_parameters_node_t *)node)->rest == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_parameters_node_t *)node)->rest);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_parameters_node_t *)node)->posts.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_parameters_node_t *) node)->posts.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_parameters_node_t *)node)->keywords.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_parameters_node_t *) node)->keywords.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_parameters_node_t *)node)->keyword_rest == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_parameters_node_t *)node)->keyword_rest);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_parameters_node_t *)node)->block == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_parameters_node_t *)node)->block);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PARENTHESES_NODE: {
            pm_buffer_append_str(buffer, "ParenthesesNode(", 16);
                        if (((pm_parentheses_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_parentheses_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_parentheses_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_parentheses_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PINNED_EXPRESSION_NODE: {
            pm_buffer_append_str(buffer, "PinnedExpressionNode(", 21);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_pinned_expression_node_t *)node)->expression);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pinned_expression_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pinned_expression_node_t *)node)->lparen_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pinned_expression_node_t *)node)->rparen_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PINNED_VARIABLE_NODE: {
            pm_buffer_append_str(buffer, "PinnedVariableNode(", 19);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_pinned_variable_node_t *)node)->variable);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pinned_variable_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_POST_EXECUTION_NODE: {
            pm_buffer_append_str(buffer, "PostExecutionNode(", 18);
                        if (((pm_post_execution_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_post_execution_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_post_execution_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_post_execution_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_post_execution_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PRE_EXECUTION_NODE: {
            pm_buffer_append_str(buffer, "PreExecutionNode(", 17);
                        if (((pm_pre_execution_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_pre_execution_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pre_execution_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pre_execution_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_pre_execution_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_PROGRAM_NODE: {
            pm_buffer_append_str(buffer, "ProgramNode(", 12);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_program_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_program_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_program_node_t *)node)->statements);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RANGE_NODE: {
            pm_buffer_append_str(buffer, "RangeNode(", 10);
                        if (((pm_range_node_t *)node)->left == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_range_node_t *)node)->left);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_range_node_t *)node)->right == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_range_node_t *)node)->right);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_range_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RATIONAL_NODE: {
            pm_buffer_append_str(buffer, "RationalNode(", 13);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_rational_node_t *)node)->numeric);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_REDO_NODE: {
            pm_buffer_append_str(buffer, "RedoNode(", 9);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_REGULAR_EXPRESSION_NODE: {
            pm_buffer_append_str(buffer, "RegularExpressionNode(", 22);
                        prettyprint_location(buffer, parser, &((pm_regular_expression_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_regular_expression_node_t *)node)->content_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_regular_expression_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_regular_expression_node_t *)node)->unescaped), pm_string_length(&((pm_regular_expression_node_t *)node)->unescaped));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_REQUIRED_DESTRUCTURED_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "RequiredDestructuredParameterNode(", 34);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_required_destructured_parameter_node_t *)node)->parameters.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_required_destructured_parameter_node_t *) node)->parameters.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_required_destructured_parameter_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_required_destructured_parameter_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_REQUIRED_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "RequiredParameterNode(", 22);
                        char name_buffer[12];
            snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_required_parameter_node_t *)node)->name);
            pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RESCUE_MODIFIER_NODE: {
            pm_buffer_append_str(buffer, "RescueModifierNode(", 19);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_rescue_modifier_node_t *)node)->expression);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_rescue_modifier_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_rescue_modifier_node_t *)node)->rescue_expression);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RESCUE_NODE: {
            pm_buffer_append_str(buffer, "RescueNode(", 11);
                        prettyprint_location(buffer, parser, &((pm_rescue_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_rescue_node_t *)node)->exceptions.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_rescue_node_t *) node)->exceptions.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_rescue_node_t *)node)->operator_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_rescue_node_t *)node)->operator_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_rescue_node_t *)node)->reference == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_rescue_node_t *)node)->reference);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_rescue_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_rescue_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_rescue_node_t *)node)->consequent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_rescue_node_t *)node)->consequent);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_REST_PARAMETER_NODE: {
            pm_buffer_append_str(buffer, "RestParameterNode(", 18);
                        if (((pm_rest_parameter_node_t *)node)->name == 0) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                char name_buffer[12];
                snprintf(name_buffer, sizeof(name_buffer), "%u", ((pm_rest_parameter_node_t *)node)->name);
                pm_buffer_append_str(buffer, name_buffer, strlen(name_buffer));
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_rest_parameter_node_t *)node)->name_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_rest_parameter_node_t *)node)->name_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_rest_parameter_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RETRY_NODE: {
            pm_buffer_append_str(buffer, "RetryNode(", 10);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_RETURN_NODE: {
            pm_buffer_append_str(buffer, "ReturnNode(", 11);
                        prettyprint_location(buffer, parser, &((pm_return_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_return_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_return_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SELF_NODE: {
            pm_buffer_append_str(buffer, "SelfNode(", 9);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SINGLETON_CLASS_NODE: {
            pm_buffer_append_str(buffer, "SingletonClassNode(", 19);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_singleton_class_node_t *)node)->locals.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                char locals_buffer[12];
                snprintf(locals_buffer, sizeof(locals_buffer), "%u", ((pm_singleton_class_node_t *)node)->locals.ids[index]);
                pm_buffer_append_str(buffer, locals_buffer, strlen(locals_buffer));
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_singleton_class_node_t *)node)->class_keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_singleton_class_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_singleton_class_node_t *)node)->expression);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_singleton_class_node_t *)node)->body == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_singleton_class_node_t *)node)->body);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_singleton_class_node_t *)node)->end_keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SOURCE_ENCODING_NODE: {
            pm_buffer_append_str(buffer, "SourceEncodingNode(", 19);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SOURCE_FILE_NODE: {
            pm_buffer_append_str(buffer, "SourceFileNode(", 15);
                        pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_source_file_node_t *)node)->filepath), pm_string_length(&((pm_source_file_node_t *)node)->filepath));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SOURCE_LINE_NODE: {
            pm_buffer_append_str(buffer, "SourceLineNode(", 15);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SPLAT_NODE: {
            pm_buffer_append_str(buffer, "SplatNode(", 10);
                        prettyprint_location(buffer, parser, &((pm_splat_node_t *)node)->operator_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_splat_node_t *)node)->expression == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_splat_node_t *)node)->expression);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_STATEMENTS_NODE: {
            pm_buffer_append_str(buffer, "StatementsNode(", 15);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_statements_node_t *)node)->body.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_statements_node_t *) node)->body.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_STRING_CONCAT_NODE: {
            pm_buffer_append_str(buffer, "StringConcatNode(", 17);
                        prettyprint_node(buffer, parser, (pm_node_t *)((pm_string_concat_node_t *)node)->left);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_string_concat_node_t *)node)->right);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_STRING_NODE: {
            pm_buffer_append_str(buffer, "StringNode(", 11);
                        char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_string_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_string_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_string_node_t *)node)->content_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_string_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_string_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_string_node_t *)node)->unescaped), pm_string_length(&((pm_string_node_t *)node)->unescaped));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SUPER_NODE: {
            pm_buffer_append_str(buffer, "SuperNode(", 10);
                        prettyprint_location(buffer, parser, &((pm_super_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_super_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_super_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_super_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_super_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_super_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_super_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_super_node_t *)node)->block == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_super_node_t *)node)->block);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_SYMBOL_NODE: {
            pm_buffer_append_str(buffer, "SymbolNode(", 11);
                        if (((pm_symbol_node_t *)node)->opening_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_symbol_node_t *)node)->opening_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_symbol_node_t *)node)->value_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_symbol_node_t *)node)->value_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_symbol_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_symbol_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_symbol_node_t *)node)->unescaped), pm_string_length(&((pm_symbol_node_t *)node)->unescaped));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_TRUE_NODE: {
            pm_buffer_append_str(buffer, "TrueNode(", 9);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_UNDEF_NODE: {
            pm_buffer_append_str(buffer, "UndefNode(", 10);
                        pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_undef_node_t *)node)->names.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_undef_node_t *) node)->names.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_undef_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_UNLESS_NODE: {
            pm_buffer_append_str(buffer, "UnlessNode(", 11);
                        prettyprint_location(buffer, parser, &((pm_unless_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_unless_node_t *)node)->predicate);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_unless_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_unless_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_unless_node_t *)node)->consequent == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_unless_node_t *)node)->consequent);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_unless_node_t *)node)->end_keyword_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_unless_node_t *)node)->end_keyword_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_UNTIL_NODE: {
            pm_buffer_append_str(buffer, "UntilNode(", 10);
                        prettyprint_location(buffer, parser, &((pm_until_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_until_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_until_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_until_node_t *)node)->predicate);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_until_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_until_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_WHEN_NODE: {
            pm_buffer_append_str(buffer, "WhenNode(", 9);
                        prettyprint_location(buffer, parser, &((pm_when_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "[", 1);
            for (uint32_t index = 0; index < ((pm_when_node_t *)node)->conditions.size; index++) {
                if (index != 0) pm_buffer_append_str(buffer, ", ", 2);
                prettyprint_node(buffer, parser, (pm_node_t *) ((pm_when_node_t *) node)->conditions.nodes[index]);
            }
            pm_buffer_append_str(buffer, "]", 1);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_when_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_when_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_WHILE_NODE: {
            pm_buffer_append_str(buffer, "WhileNode(", 10);
                        prettyprint_location(buffer, parser, &((pm_while_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_while_node_t *)node)->closing_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_while_node_t *)node)->closing_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_node(buffer, parser, (pm_node_t *)((pm_while_node_t *)node)->predicate);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_while_node_t *)node)->statements == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_while_node_t *)node)->statements);
            }
            pm_buffer_append_str(buffer, ", ", 2);            char flags_buffer[12];
            snprintf(flags_buffer, sizeof(flags_buffer), "+%d", node->flags >> 2);
            pm_buffer_append_str(buffer, flags_buffer, strlen(flags_buffer));
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_X_STRING_NODE: {
            pm_buffer_append_str(buffer, "XStringNode(", 12);
                        prettyprint_location(buffer, parser, &((pm_x_string_node_t *)node)->opening_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_x_string_node_t *)node)->content_loc);
            pm_buffer_append_str(buffer, ", ", 2);            prettyprint_location(buffer, parser, &((pm_x_string_node_t *)node)->closing_loc);
            pm_buffer_append_str(buffer, ", ", 2);            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_bytes(buffer, pm_string_source(&((pm_x_string_node_t *)node)->unescaped), pm_string_length(&((pm_x_string_node_t *)node)->unescaped));
            pm_buffer_append_str(buffer, "\"", 1);
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
        case PM_YIELD_NODE: {
            pm_buffer_append_str(buffer, "YieldNode(", 10);
                        prettyprint_location(buffer, parser, &((pm_yield_node_t *)node)->keyword_loc);
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_yield_node_t *)node)->lparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_yield_node_t *)node)->lparen_loc);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_yield_node_t *)node)->arguments == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_node(buffer, parser, (pm_node_t *)((pm_yield_node_t *)node)->arguments);
            }
            pm_buffer_append_str(buffer, ", ", 2);            if (((pm_yield_node_t *)node)->rparen_loc.start == NULL) {
                pm_buffer_append_str(buffer, "nil", 3);
            } else {
                prettyprint_location(buffer, parser, &((pm_yield_node_t *)node)->rparen_loc);
            }
            pm_buffer_append_str(buffer, ")", 1);
            break;
        }
    }
}

void
pm_print_node(pm_parser_t *parser, pm_node_t *node) {
    pm_buffer_t buffer;
    if (!pm_buffer_init(&buffer)) return;

    prettyprint_node(&buffer, parser, node);
    printf("%.*s\n", (int) buffer.length, buffer.value);

    pm_buffer_free(&buffer);
}

// Pretty-prints the AST represented by the given node to the given buffer.
PRISM_EXPORTED_FUNCTION void
pm_prettyprint(pm_parser_t *parser, pm_node_t *node, pm_buffer_t *buffer) {
    prettyprint_node(buffer, parser, node);
}
